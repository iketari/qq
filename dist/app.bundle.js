webpackJsonp([0],{0:function(t,exports,e){e(1),t.exports=e(298)},298:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}var i=e(299),a=n(i),s=e(301),u=n(s),r=e(307),l=n(r),o=e(309),c=n(o),d=e(310),f=n(d),v=e(392),h=n(v),p=e(427),b=n(p);e(431);var g={apiKey:"AIzaSyBS3NgOJoNZ9NhYrq4WG7xLZM4RyeKn66w",authDomain:"qinq-9d53f.firebaseapp.com",databaseURL:"https://qinq-9d53f.firebaseio.com",storageBucket:"qinq-9d53f.appspot.com",messagingSenderId:"475423633554"};u.default.initializeApp(g),a.default.module("app",[c.default,l.default,f.default,h.default]).config(["$locationProvider",function(t){"ngInject";t.html5Mode(!0).hashPrefix("!")}]).component("app",b.default)},310:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(299),a=n(i),s=e(311),u=n(s),r=e(320),l=n(r),o=a.default.module("app.common",[u.default,l.default]).name;exports.default=o},311:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(299),a=n(i),s=e(309),u=n(s),r=e(312),l=n(r),o=a.default.module("navbar",[u.default]).component("navbar",l.default).name;exports.default=o},312:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(313),a=n(i),s=e(314),u=n(s);e(316);var r={restrict:"E",bindings:{active:"<",user:"<"},template:a.default,controller:u.default};exports.default=r},313:function(t,exports){t.exports='<nav class="navbar">\n\t<div class="nav-wrapper teal darken-1">\n      <a ui-sref="home" class="brand-logo left">Questions in Queue</a>\n\n      \t<div ng-show="$ctrl.user.displayName" class="chip right hide-on-med-and-down">\n\t\t\t<img ng-show="$ctrl.user.photoURL" src="{{ $ctrl.user.photoURL }}" alt="Contact Person">\n\t\t\t{{ $ctrl.user.displayName }}\n\t\t</div>\n    </div>\n</nav>\n<ul class="tabs tabs-transparent teal darken-2">\n\t<li class="tab">\n\t\t<a ng-class="{active: $ctrl.active === \'home\'}" ui-sref="home">Вопросы</a>\n\t</li>\n\t<li class="tab">\n\t\t<a ng-class="{active: $ctrl.active === \'ask\'}" ui-sref="ask">Спросить</a>\n\t</li>\n\t<li class="tab">\n\t\t<a ng-class="{active: $ctrl.active === \'queue\'}" ui-sref="queue">Очередь</a>\n\t</li>\n</ul>'},314:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(315),a=n(i),s=function t(e,n,i){"ngInject";var s=this;(0,a.default)(this,t),this.name="navbar",this.user=i.getUser(),i.onChangeAuth(function(t){s.user=t,e.$apply()})};s.$inject=["$scope","$firebaseArray","userService"],exports.default=s},316:function(t,exports,e){var n=e(317);"string"==typeof n&&(n=[[t.id,n,""]]);e(319)(n,{});n.locals&&(t.exports=n.locals)},317:function(t,exports,e){exports=t.exports=e(318)(),exports.push([t.id,"body{height:100%;font:62.5% Roboto,sans-serif}.navbar .tabs{width:auto}.navbar .chip{position:absolute;right:0;top:13px}",""])},320:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(299),a=n(i),s=e(301),u=n(s),r=e(309),l=n(r),o=e(321),c=n(o),d=e(326),f=n(d);window.firebase=u.default;var v=a.default.module("user",[l.default]).component("user",c.default).service("userService",f.default).name;exports.default=v},321:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(322),a=n(i),s=e(323),u=n(s);e(324);var r={restrict:"E",bindings:{},template:a.default,controller:u.default};exports.default=r},322:function(t,exports){t.exports="<div>\n  <h1>{{ $ctrl.name }}</h1>\n</div>\n"},323:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(315),a=n(i),s=function t(){(0,a.default)(this,t),this.name="user"};exports.default=s},324:function(t,exports,e){var n=e(325);"string"==typeof n&&(n=[[t.id,n,""]]);e(319)(n,{});n.locals&&(t.exports=n.locals)},325:function(t,exports,e){exports=t.exports=e(318)(),exports.push([t.id,".user{color:red}",""])},326:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(327),a=n(i);exports.default=["$firebaseAuth",function(t){"ngInject";var e=this,n=["7BQgSlXJ4HNVUmRAulgXjqJ4LuD2","8AMg7AGBmjWEZGNbsSLHdQilycI3","D7RFkKdcrFeyWpXmEm9ZXk5LWoG3"];this.authObj=t(u.default.auth()),this._callbacks=[],this.authObj.$onAuthStateChanged(function(t){console.log(t),t?e.user=t:e.user=null,e._callbacks.forEach(function(e){return e(t)})}),this.isAdmin=function(){return this.user&&n.includes(this.user.uid)},this.onChangeAuth=function(t){this._callbacks.push(t)},this.auth=function(){this.authObj.$signInWithRedirect("google").then(function(){}).catch(function(t){console.error("Authentication failed:",t)})},this.logOut=function(){this.authObj.$signOut()},this.getUser=function(){return this.user},this.getUserId=function(){var t=this;return new a.default(function(e,n){var i=t.authObj.$getAuth();return i?void e(i.uid):t.authObj.$signInAnonymously().then(function(t){return t.uid})})}}];var s=e(301),u=n(s)},392:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(299),a=n(i),s=e(393),u=n(s),r=e(409),l=n(r),o=e(415),c=n(o),d=e(421),f=n(d),v=a.default.module("app.components",[u.default,l.default,c.default,f.default]).name;exports.default=v},393:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(299),a=n(i),s=e(309),u=n(s),r=e(394),l=n(r),o=a.default.module("home",[u.default]).config(["$stateProvider","$urlRouterProvider",function(t,e){"ngInject";e.otherwise("/"),t.state("home",{url:"/",component:"home"})}]).component("home",l.default).name;exports.default=o},394:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(395),a=n(i),s=e(396),u=n(s);e(407);var r={restrict:"E",bindings:{questions:"="},template:a.default,controller:u.default};exports.default=r},395:function(t,exports){t.exports='<div class="home">\n\n    <navbar active="\'home\'"></navbar>\n\n    <div>\n        <h4 class="center-align white-text">Список вопросов</h4>\n    </div>\n\n    <div class="row">\n\n        <div ng-repeat="question in $ctrl.questions | orderBy:\'-like\' | filter: $ctrl.blocked" class="col s12 m12 l12">\n          <div class="card blue-grey darken-1">\n            <div class="card-content white-text">\n              <span class="new badge" ng-class="{red: question.like < 0, blue: question.like >= 0}" data-badge-caption="rating">{{ question.like }}</span>\n              <span class="card-title">{{ question.first_name }}</span>\n              <span class="right">{{question.email}}</span>\n              <p class="flow-text">{{ question.question }}</p>\n            </div>\n            <div class="card-action">\n                <div ng-show="$ctrl.isAdmin()">\n                    <a ng-show="!question.approved" ng-click="$ctrl.approve(question)" class="green waves-effect waves-light btn">\n                        <i class="material-icons left">visibility</i>Аппрув\n                    </a>\n                    <a ng-click="$ctrl.delete(question)" class="red waves-effect waves-light btn">\n                        <i class="material-icons left">delete</i>Удалить\n                    </a>\n                </div>\n\n                <a ng-click="$ctrl.up(question)" class="waves-effect waves-light btn">\n                    <i class="material-icons left">thumb_up</i>Интересно\n                </a>\n                <a ng-click="$ctrl.down(question)" class="waves-effect waves-light btn">\n                    <i class="material-icons left">thumb_down</i>Не очень\n                </a>\n            </div>\n          </div>\n        </div>\n\n    </div>\n</div>'},396:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(397),a=n(i),s=e(315),u=n(s),r=e(403),l=n(r),o=e(301),c=n(o),d=void 0,f=function(){function t(e,n,i){"ngInject";var a=this;(0,u.default)(this,t);var s=c.default.database().ref();this.$questions=n(s.child("questions")),this.$questions.$loaded().then(function(t){a.questions=t}),this.userService=i,d=i,this.name="home"}return t.$inject=["$scope","$firebaseArray","userService"],(0,l.default)(t,[{key:"blocked",value:function(t){return d&&d.isAdmin()?!t.removed:!t.removed&&t.approved}},{key:"isAdmin",value:function(){return this.userService.isAdmin()}},{key:"up",value:function(t){this._process(t,{like:void 0!==t.like?t.like+1:1})}},{key:"down",value:function(t){this._process(t,{like:void 0!==t.like?t.like-1:0})}},{key:"delete",value:function(t){this._process(t,{removed:!0,inprogress:!1})}},{key:"approve",value:function(t){this._process(t,{approved:!0,inprogress:!1})}},{key:"_process",value:function(t,e){(0,a.default)(t,e),this.$questions.$save(t)}}]),t}();exports.default=f},407:function(t,exports,e){var n=e(408);"string"==typeof n&&(n=[[t.id,n,""]]);e(319)(n,{});n.locals&&(t.exports=n.locals)},408:function(t,exports,e){exports=t.exports=e(318)(),exports.push([t.id,".home{min-height:100vh}.home .btn{margin:5px 0}",""])},409:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(299),a=n(i),s=e(309),u=n(s),r=e(410),l=n(r),o=a.default.module("about",[u.default]).config(["$stateProvider",function(t){"ngInject";t.state("about",{url:"/about",component:"about"})}]).component("about",l.default).name;exports.default=o},410:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(411),a=n(i),s=e(412),u=n(s);e(413);var r={restrict:"E",bindings:{},template:a.default,controller:u.default};exports.default=r},411:function(t,exports){t.exports="<navbar></navbar>\n<h1>{{ $ctrl.name }}</h1>\n<section>\n  About us.\n</section>\n"},412:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(315),a=n(i),s=function t(){(0,a.default)(this,t),this.name="about"};exports.default=s},413:function(t,exports,e){var n=e(414);"string"==typeof n&&(n=[[t.id,n,""]]);e(319)(n,{});n.locals&&(t.exports=n.locals)},414:function(t,exports,e){exports=t.exports=e(318)(),exports.push([t.id,".about{color:red}",""])},415:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(299),a=n(i),s=e(309),u=n(s),r=e(416),l=n(r),o=a.default.module("ask",[u.default]).component("ask",l.default).config(["$stateProvider","$urlRouterProvider",function(t,e){"ngInject";e.otherwise("/"),t.state("ask",{url:"/ask",component:"ask"})}]).name;exports.default=o},416:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(417),a=n(i),s=e(418),u=n(s);e(419);var r={restrict:"E",bindings:{qData:"=",user:"<",disabled:"<",invalid:"<"},template:a.default,controller:u.default};exports.default=r},417:function(t,exports){t.exports='<div class="ask">\n\t<navbar active="\'ask\'"></navbar>\n\n\t<div>\n\t\t<h4 class="center-align white-text">Задать вопрос</h4>\n\t</div>\n\n\t<div class="row">\n\t\t<h5 class="center red-text" ng-show="$ctrl.invalid">\n\t\t\tВы уже отправили свой вопрос!<br> Пожалуйста дожитесь его модерации!\n\t\t</h5>\n\t\t<form autocomplete="off" ng-submit="$ctrl.save()" class="col s12">\n\t\t\t<div class="row">\n\t\t\t\t<div class="input-field col s6">\n\t\t\t\t\t<input required maxlength="50" ng-disabled="$ctrl.disabled" id="first_name" ng-model="$ctrl.qData.first_name" type="text" class="white-text validate">\n\t\t\t\t\t<label for="first_name">Имя</label>\n\t\t\t\t</div>\n\t\t\t\t<div class="input-field col s6">\n\t\t\t\t\t<input maxlength="150" ng-disabled="$ctrl.disabled" id="email" ng-model="$ctrl.qData.email" type="text" class="white-text validate">\n\t\t\t\t\t<label for="email">Электронная почта</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="row">\n\t\t\t\t<div class="input-field col s12">\n\t\t\t\t\t<textarea maxlength="950" ng-disabled="$ctrl.disabled" id="question" ng-model="$ctrl.qData.question" class="materialize-textarea white-text"></textarea>\n\t\t\t\t\t<label for="question">Ваш вопрос</label>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class="row">\n\t\t\t\t<div class="input-field col s12">\n\t\t\t\t\t<button ng-disabled="$ctrl.disabled" class="btn waves-effect waves-light" type="submit" name="action">Отправить\n\t\t\t\t\t\t<i class="material-icons right">send</i>\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</form>\n\t</div>\n</div>\n'},418:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(327),a=n(i),s=e(315),u=n(s),r=e(403),l=n(r),o=e(301),c=n(o),d=function(){function t(e,n,i,a){"ngInject";var s=this;(0,u.default)(this,t),this.name="ask",this.userService=a,this.disabled=!1;var r=c.default.database().ref();this.ref=r,this.question=n(r.child("questions").push()),this.qData={},this.$firebaseObject=n,this.$firebaseArray=i,this.$scope=e,a.onChangeAuth(function(t){t&&(s.user=t)})}return t.$inject=["$scope","$firebaseObject","$firebaseArray","userService"],(0,l.default)(t,[{key:"save",value:function(){var t=this;this.disabled=!0,this.invalid=!1,this.userService.getUserId().then(function(e){return t._checkUid(e).catch(t._invalidUid.bind(t))}).then(this._saveToDb.bind(this))}},{key:"_checkUid",value:function(t){var e=this;return new a.default(function(n,i){var a=e.$firebaseArray(e.ref.child("questions").orderByChild("uid").equalTo(t));a.$loaded(function(e){var a=e.find(function(t){return t.inprogress});a?i():n(t)},i)})}},{key:"_invalidUid",value:function(){this.disabled=!1,this.invalid=!0}},{key:"_saveToDb",value:function(t){var e=this;this.qData.uid=t,this.qData.inprogress=!0,this.question.$value=this.qData,this.question.$save().then(function(){e.qData={},e.disabled=!1})}}]),t}();exports.default=d},419:function(t,exports,e){var n=e(420);"string"==typeof n&&(n=[[t.id,n,""]]);e(319)(n,{});n.locals&&(t.exports=n.locals)},420:function(t,exports,e){exports=t.exports=e(318)(),exports.push([t.id,".ask{min-height:100vh}",""])},421:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(299),a=n(i),s=e(309),u=n(s),r=e(422),l=n(r),o=a.default.module("queue",[u.default]).component("queue",l.default).config(["$stateProvider","$urlRouterProvider",function(t,e){"ngInject";e.otherwise("/"),t.state("queue",{url:"/queue",component:"queue"})}]).name;exports.default=o},422:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(423),a=n(i),s=e(424),u=n(s);e(425);var r={restrict:"E",bindings:{user:"<",questions:"<"},template:a.default,controller:u.default};exports.default=r},423:function(t,exports){t.exports='<div class="queue">\n\n\t<navbar active="\'queue\'"></navbar>\n\n\n\t<div class="center-align">\n\t\t<h4 ng-show="$ctrl.user" class="white-text">Привет! <span>{{ $ctrl.user.displayName }}, </span>перед тобой</h4>\n\n\t\t<h1 class="white-text">Вопросов в очереди: {{ $ctrl.questions.length }}</h1>\n\n\t\t<a ui-sref="home" class="waves-effect waves-light btn">\n\t\t\t<i class="material-icons left">toc</i>К списку\n\t\t</a>\n\n\t\t<a ng-click="$ctrl.auth()" ng-show="!$ctrl.user" class="waves-effect waves-light btn">\n\t\t\t<i class="material-icons left">lock_open</i>Войти с помощью Google\n\t\t</a>\n\n\t\t<a ng-click="$ctrl.logout()" ng-show="$ctrl.user" class="waves-effect waves-light btn">\n\t\t\t<i class="material-icons left">lock_close</i>Выйти\n\t\t</a>\n\t</div>\n</div>'},424:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(315),a=n(i),s=e(403),u=n(s),r=e(301),l=n(r);window.firebase=l.default;var o=function(){function t(e,n,i){"ngInject";var s=this;(0,a.default)(this,t);var u=l.default.database().ref();this.name="queue",this.userService=i,this.$questions=n(u.child("questions")),this.$questions.$loaded().then(function(t){s.questions=t}),this.user=i.getUser(),i.onChangeAuth(function(t){s.user=t,e.$apply()})}return t.$inject=["$scope","$firebaseArray","userService"],(0,u.default)(t,[{key:"getLength",value:function(){return this.questions&&this.questions.filter(function(t){return t.approved})}},{key:"auth",value:function(){this.userService.auth()}},{key:"logout",value:function(){this.userService.logOut()}}]),t}();exports.default=o},425:function(t,exports,e){var n=e(426);"string"==typeof n&&(n=[[t.id,n,""]]);e(319)(n,{});n.locals&&(t.exports=n.locals)},426:function(t,exports,e){exports=t.exports=e(318)(),exports.push([t.id,".queue{min-height:100vh}",""])},427:function(t,exports,e){"use strict";function n(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(exports,"__esModule",{value:!0});var i=e(428),a=n(i);e(429);var s={template:a.default,restrict:"E"};exports.default=s},428:function(t,exports){t.exports='<!-- Place all UI elements intended to be present across all routes in this file -->\n<div class="app">\n  <div ui-view></div>\n</div>\n'},429:function(t,exports,e){var n=e(430);"string"==typeof n&&(n=[[t.id,n,""]]);e(319)(n,{});n.locals&&(t.exports=n.locals)},430:function(t,exports,e){exports=t.exports=e(318)(),exports.push([t.id,"body{font:62.5% Roboto,sans-serif}.app,body{height:100%}.app{background-color:#37474f}",""])}});
//# sourceMappingURL=app.bundle.js.map